# JobSPA 项目说明

## 项目简介
JobSPA 是一个基于 Vue 3 和 Flask 开发的全栈单页应用，旨在提供一个综合性的项目管理和文件管理平台。该系统集成了仪表盘、项目管理、高级查询、统计分析、待办事项、文件管理和报销管理等功能，为用户提供一站式的工作管理解决方案。

## 主要功能

- **仪表盘**：系统概览和关键指标展示
- **项目管理**：管理项目信息和进度，支持项目更新和历史记录查看
- **高级查询**：执行复杂的项目和数据查询
- **统计分析**：提供数据可视化和统计报表
- **待办事项**：个人任务管理和跟踪
- **文件管理**：树形结构的文件和文件夹管理，支持创建文件夹、上传文件等操作
- **报销管理**：管理报销申请和审批流程
- **工作日志**：自动记录日常活动，支持AI生成工作日志
- **API文档**：系统API接口的详细文档
- **用户管理**：支持用户登录、修改密码等功能

## 技术栈

### 前端
- **框架**：Vue 3 + Composition API
- **语言**：TypeScript
- **路由**：Vue Router 4
- **状态管理**：Pinia
- **图表库**：Chart.js、ECharts
- **构建工具**：Vite

### 后端
- **框架**：Flask 2.0.1
- **数据库**：MySQL (通过 PyMySQL 连接)
- **ORM**：SQLAlchemy 1.4.32
- **CORS**：Flask-CORS 3.0.10
- **环境管理**：python-dotenv 0.19.2
- **AI集成**：支持调用大模型API生成内容（如DeepSeek）

## 快速开始

### 1. 环境准备

- **前端**：Node.js 16+，npm 7+
- **后端**：Python 3.8+，pip 20+
- **数据库**：MySQL 5.7+

### 2. 安装依赖

#### 前端依赖
```bash
cd frontend
npm install
```

#### 后端依赖
```bash
cd backend
pip install -r requirements.txt
```

### 3. 配置数据库

1. 创建 MySQL 数据库（默认名称：`projectmanagement`）
2. 修改 `backend/.env` 文件中的数据库连接信息（如果需要）

### 4. 启动服务

#### 启动后端服务
```bash
cd backend
python app.py
```
后端服务将运行在 `http://localhost:5000`

#### 启动前端服务
```bash
cd frontend
npm run dev
```
前端服务将运行在 `http://localhost:5173`

### 5. 访问系统

打开浏览器，访问 `http://localhost:5173`，即可进入 JobSPA 系统。

## 目录结构

### 前端结构
```
frontend/
├── public/              # 静态资源
├── src/
│   ├── assets/          # 图片、样式等资源
│   ├── components/      # 通用组件
│   ├── router/          # 路由配置
│   ├── views/           # 页面组件
│   ├── App.vue          # 根组件
│   ├── main.ts           # 入口文件
│   └── style.css         # 全局样式
├── package.json         # 项目配置和依赖
├── tsconfig.json        # TypeScript 配置
└── vite.config.ts       # Vite 配置
```

### 后端结构
```
backend/
├── app/
│   ├── models/          # 数据模型
│   ├── routes/          # API 路由
│   │   ├── ai_routes.py           # AI相关API路由
│   │   ├── auth_routes.py         # 认证相关API路由
│   │   ├── file_routes.py         # 文件管理API路由
│   │   ├── project_routes.py      # 项目管理API路由
│   │   ├── todo_routes.py         # 待办事项API路由
│   │   ├── user_routes.py         # 用户相关API路由
│   │   └── work_log_routes.py     # 工作日志API路由
│   └── __init__.py      # 应用初始化
├── .env                 # 环境变量配置
├── app.py               # 应用入口
├── init_db.py           # 数据库初始化
└── requirements.txt     # Python 依赖
```

## 使用示例

### 文件管理

1. **创建文件夹**：点击文件夹旁边的新建文件夹图标，输入文件夹名称
2. **上传文件**：点击文件夹旁边的上传文件图标，选择要上传的文件
3. **浏览文件**：点击文件夹名称展开/折叠文件夹内容

### 待办事项

1. **添加待办**：在待办事项页面的底部输入框中输入待办内容，点击添加按钮
2. **标记完成**：点击待办事项前面的复选框，标记为已完成
3. **撤销完成**：在已完成列表中，点击撤销按钮，将事项移回待办列表

### 修改密码

1. 点击页面右上角的用户名，在下拉菜单中选择「修改密码」
2. 输入当前密码和新密码，点击保存按钮

### 工作日志

1. **查看工作日志**：点击侧边栏中的「工作日志」链接，进入工作日志页面
2. **选择日期**：在日历中点击日期，查看或生成该日期的工作日志
3. **生成今日活动**：系统会自动获取今日的活动记录
4. **生成工作日志**：点击「生成今日日志」按钮，系统会调用AI生成工作日志
5. **查看历史日志**：在日历中选择历史日期，查看已保存的工作日志

## 常见问题

### 1. 无法登录系统
- 检查后端服务是否正常运行
- 确认用户名和密码是否正确
- 检查浏览器控制台是否有网络错误

### 2. 无法在根目录下创建文件夹
- 确保后端服务正常运行
- 检查浏览器控制台是否有错误信息
- 确认用户权限是否正确

### 3. 文件上传失败
- 检查文件大小是否超过限制
- 确认文件类型是否被允许
- 检查后端服务的文件存储路径是否有写权限

### 4. 修改密码失败
- 确保输入的当前密码正确
- 检查新密码和确认密码是否一致
- 检查后端服务是否正常运行

## 注意事项

- 系统默认使用 JWT 进行用户认证，token 存储在 localStorage 中
- 文件管理功能会为每个用户创建独立的文件存储目录
- 开发环境下，后端服务运行在调试模式，生产环境请修改配置

## 许可证

MIT License
